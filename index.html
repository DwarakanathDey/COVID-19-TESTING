<!DOCTYPE html>
<html lang="en-GB">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content='max-image-preview:large'>

        <link id="favicon" rel="shortcut icon" href="add/1.png" type="add/1.png">

        <link rel="stylesheet" href="style.css">
        <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>

        <title>COVID-19 TESTING | HOME</title>

        <script  src="http://translate.google.com/translate_a/element.js?cb=loadGoogleTranslate"></script>
    </head>

    

    <body background="20.jpg" onload="initClock()" >
        <div id="google_element"  align="right"></div>
        <header class="l-header">
            <nav class="nav bd-grid">
                
                <div>
                    <a href="#" class="nav__logo">Welcome</a>
                </div>

                <div class="datetime">
                  <div class="date">
                    <span id="dayname">Day</span>,
                    <span id="month">Month</span>
                    <span id="daynum">00</span>,
                    <span id="year">Year</span>
                  </div>
                  <div class="time">
                    <span id="hour">00</span>:
                    <span id="minutes">00</span>:
                    <span id="seconds">00</span>
                    <span id="period">AM</span>
                  </div>
                </div>

                <img src="add/moon.png" alt="" id="icon">
            </nav>
        </header>
        <center>
            
            <h1 class="section-title">COVID-19 TESTING USING X-RAY IMAGES</h1>
            <br>
            <input id="image-selector" type="file"> 
            <button id="predict-button" class="button_predict">Predict</button>
            <br> <br>  
            <p>PREDICTION: <span id="result"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            PROBABILITY: <span id="probability"></span></p>
            <img id="selected-image" width="400" src=""/>
            <br>
        </center>

        <main  class="l-main">
            
            <!--contact-->
            <section class="contact section" id="contact">
              <span class="section-subtitle">Contact Us</span>
              <h2 class="section-title">Get In Touch</h2>

              <div class="contact__container bd-grid">
                <form action="" class="contact__form">
                   <div class="contact__inputs">
                      <input type="text" placeholder="Name" class="contact__input">
                      <input type="mail" placeholder="Email" class="contact__input">
                   </div>
                     
                    <input type="text" placeholder="Project" class="contact__input">

                    <textarea name="" id="" cols="0" rows="10" placeholder="Message" class="contact__input"></textarea>

                    <input type="submit" value="Send Message" class="button contact__button">
                </form>

                <div>
                   <div class="contact__info">
                      <h3 class="contact__subtitle">Call us</h3>
                      <span class="contact__text">+91-9330508581</span>
                      <span class="contact__text">+91-9856447120</span>
                   </div>
                   <div class="contact__info">
                      <h3 class="contact__subtitle">E-mail</h3>
                      <span class="contact__text">dey.nath2000@gmail.com</span>
                      <span class="contact__text">dey.official20@gmail.com</span>
                   </div>
                   <div class="contact__info">
                      <h3 class="contact__subtitle">Location</h3>
                      <span class="contact__text">Kolkata</span>
                      <span class="contact__text">West Bengal - India</span>
                   </div>
                </div>
              </div>
            </section>

            <!--footer-->
            <footer class="footer section">
              <div class="footer__container bd-grid">
                <h1 class="footer__title">Group 18</h1>
                <p class="footer__description">Thank You for visiting our website.</p>

                <div class="footer__social">
                    <a href="https://www.linkedin.com/login" class="footer__link"><i class='bx bxl-linkedin'></i></a>
                    <a href="https://github.com/login" class="footer__link"><i class='bx bxl-github'></i></a>
                    <a href="https://web.whatsapp.com/" class="footer__link"><i class='bx bxl-whatsapp'></i></a>
                    <a href="https://www.facebook.com/" class="footer__link"><i class='bx bxl-facebook' ></i></a>
                    <a href="https://www.instagram.com/accounts/login/" class="footer__link"><i class='bx bxl-instagram' ></i></a>
                    <a href="https://twitter.com/LOGIN" class="footer__link"><i class='bx bxl-twitter' ></i></a>
                </div>

                <p class="footer__copy" ><i class='bx bx-copyright'></i>  All rights reserved - 2022</p>
              </div>
            </footer>

        
        
        </main>

        <script src="main.js"></script>
        <script>
          var icon = document.getElementById("icon");
          icon.onclick = function() {
          document.body.classList.toggle("dark-theme");
            if(document.body.classList.contains("dark-theme")){
              icon.src= "add/sun.png";
            }else{
              icon.src= "add/moon.png";
            }     
          }
        </script>  

        <script type="text/javascript">
          function updateClock() {
            var now= new Date();
            var dname= now.getDay(),
                mo= now.getMonth(),
                dnum= now.getDate(),
                yr= now.getFullYear(),
                hou= now.getHours();
                min= now.getMinutes(),
                sec= now.getSeconds(),
                pe= "AM";

                if(hou==0){
                  hou=12;
                }
                if(hou>12){
                  hou=hou-12;
                  pe= "PM";
                }
                Number.prototype.pad=function(digits){
                  for(var n= this.toString(); n.length < digits; n= 0 +n);
                  return n;
                }

                var months= ["January","February","March","April","May","June","July","August","September","October","November","December"];
                var week= ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
                var ids= ["dayname","month","daynum","year","hour","minutes","seconds","period"];
                var values= [week[dname],months[mo],dnum.pad(2),yr,hou.pad(2),min.pad(2),sec.pad(2),pe];
                for(var i=0;i<ids.length;i++)
                document.getElementById(ids[i]).firstChild.nodeValue=values[i];
          }
          function initClock() {
            updateClock();
            window.setInterval("updateClock()", 1);
          }
           
        </script>

        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

        <script>
            let base64Image;
            $("#image-selector").change(function() {
                let reader = new FileReader();
                reader.onload = function(e) {
                    let dataURL = reader.result;
                    $('#selected-image').attr("src", dataURL);
                    base64Image = dataURL.replace(/^data:image\/(png|jpg|jpeg);base64,/, "");
                    console.log(base64Image);
                }
                reader.readAsDataURL($("#image-selector")[0].files[0]);
                $("#result").text("");
                $("#probability").text("");

            });

            $("#predict-button").click(function(){
                    let message = {
                    image: base64Image
                }
                console.log(message);
                $.post("http://127.0.0.1:5000/predict", JSON.stringify(message), function(response){
                    $("#result").text(response.prediction.result);
                    $("#probability").text(response.prediction.accuracy.toFixed(2));
                    console.log(response);
                });
            });

        </script>

        <script>
            function loadGoogleTranslate() {
            new google.translate.TranslateElement("google_element");
            }
        </script>  

    </body>
</html>   